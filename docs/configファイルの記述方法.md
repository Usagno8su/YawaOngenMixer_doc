# confファイルの設定手順

読み込ませるconfファイルの記述方法について解説します。




## YAMLファイルの仕様について

この設定ファイルはYAMLという形式で記述されています。

このファイルは階層構造となっており、
親要素の下に子要素が付き、更にその子要素にさらに子要素をつけられます。

階層構造は半角スペースで表現します。
このファイルでは半角スペース2つでひとつ下の階層となります。

``` 例
info:  # 親要素
  ver: "2.3.1"   # 「info」の子要素。（半角スペース２）
  
  filedir:  # 「info」の子要素。（半角スペース２）
    voidir: "./infile"　　# 「filedir」の子要素。（半角スペース４）

```

なお、タブキーは使用できません。（これはYAML形式の仕様です）

基本的に本ツールでは連想配列形式で設定を行います。


## 読み込むファイル名について

本ツールは、音声ファイルのファイル名を見て、どの親要素内にある項目を選択するか決定しています。

項目の優先順位判定は、シリアル番号＞キャラ名（スタイル）＞キャラ名＞デフォルト の優先順位となります。

<img src="./res/filename_edit.jpg" width="800">

デフォルトの設定以外は、デフォルトから変更したい項目だけ記述すれば問題ありません。


## 各項目の説明

各設定項目の要素について解説します。

各項目の詳細についてはconfファイルにコメントを書いているため、
そちらを確認して下さい。

このドキュメントでは主なものを記載しています。

いくつかファイルやディレクトリの場所を指定する項目がありますが、
相対パスで記述する場合は、必ず「 yomixer.rb 」のある場所を起点にして記述して下さい。

### info
基礎情報

基本的な設定はこちらに設定されます。

- ver

  このYAMLファイルの構造仕様のバージョン。
  古い仕様のYAMLファイルを読み込まないようにします。

  
- voidir
  
  音声データを入れているディレクトリです。
  
  VOICEVOX から出力したファイルをこちらで指定したディレクトリに入れて下さい。
  
- outdir
  
  完成した動画の出力ディレクトリです。
  
- out_picdir

  立ち絵画像から動画の画面サイズの画像を生成した場合の保存場所です。
  
  無言のシーンでも立ち絵を表示させたい場合は、こちらに出力した画像をご利用して下さい。
  
- kugirihaihun
  
  ファイル名の区切り文字として「-」を使うかどうか指定。
  
  Voicepeakの区切り文字が「_」ではないため、それに合わせるための設定です。
  
  ただし、CoeFontのシリアル番号に「-」があるため、それのときはnoにする必要があります。



### defo
デフォルトの設定

シリアル番号・各キャラ名で指定されていない場合はこの項目の値が適応されます。

こちらの項目は必要がない項目でも削らないで下さい。
エラーで動かなくなります。

- tatie

  立ち絵のファイル位置を記録します。

- conp_tatie

  「tatie」で指定した立ち絵画像を、そのまま画面の大きさにするかどうか。

  すでに生成したい動画と同じサイズの画像を生成して指定している場合はyesを入れます。


- tatie_muki

  立ち絵をどこに配置するかを指定します。
  
  下記のように日本語か英語で設定可能です。
  
  |         |          |         |
  | :---         |     :---:      |          ---: |
  | "上段左" or "NorthWest"        | "上段中央" or "North"    | "上段右" or "NorthEast"       |
  | "中段左" or "West"             | "中段中央" or "Center"   | "中段右" or "East"            |
  | "L" or "下段左" or "SouthWest"   | "下段中央" or <マッチするものがない場合>   | "R" or "下段右" or "SouthEast"  |
  
  ※下段はLやRでも指定できるようになっていますが、これは古いconfでも対応させるためです。
  
  　今後のアップデートで削除される可能性もあります。
  
- tatie_h_p

  立ち絵を画面の高さの何％にするか指定する。
  
  100％以上の設定も可能です。

- fps: "5"

  入力される立ち絵と、出力される動画のフレームレート指定です。
  
  現在の仕様上は1にしても問題ありませんが、将来的に目や口を動かす場合には調整する必要があります。

- enatext
  
  字幕を表示するか指定（yesを入れると表示）
  
  字幕のテキストファイルは、拡張子以外は音声ファイルと同じ名前にする必要があります。

- enabg
  
  字幕の背景色をつけるか指定します。（yesを入れると表示）

- voice_text_fonts
  
  使用するフォントファイルの位置を記載します。
  
  対応するのはttc形式です。


### kyara

各キャラの設定

デフォルトの項目とは違う設定をしたいキャラがある場合はこちらに設定します。
ここにない場合はデフォルトの設定が使用されます。

defoで設定されている値よりもこちらの設定が優先されます。

ここの設定はキャラのスタイルにかかわらず、全てに適用されます。

- 記述例

```
kyara:
  ## 該当キャラの名前
  四国めたん:
    # 立ち絵
    tatie: "./public/metan1.png"
    # フォントカラー
    voice_text_color: "#FFFFFF"
    # フォント周りのフチの色
    voice_text_bordercr: "#FF69B4"
```

これで、「四国めたん」の場合は立ち絵とフォントカラーとフォントのフチの色が変更されます。


### kyara_st

キャラ名だけでなくスタイルも指定した設定です。

前項のキャラ名のみの項目で同じ値がある場合、こちらの設定が優先されます。

- 記述例

```
kyara_st:
  四国めたん（ささやき）:
    # フォントカラー
    voice_text_color: "#F08080"
    # フォントサイズ
    voice_text_size: "8"
```

これで、「四国めたん」の「ささやき」スタイルの場合は「kyara」の設定に加えてフォントサイズも変更され、フォントカラーは「#F08080」に変更されます。


### seid
シリアル番号の設定

音声ファイルごとに違う項目を設定したい場合はこちらに記述します。

ここの設定が最も優先されます。

- 記述例

```
seid:
  "002":
    # フォントサイズ
    voice_text_size: "64"
```

これで、シリアル番号が「002」の場合はフォントサイズが「"64"」になります。

もし「002」のキャラ名が「四国めたん（ささやき）」であっても、こちらの設定が優先されます。
